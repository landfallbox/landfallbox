---
layout: article
title: Python 笔记
article_header: 
  type: cover
  image:
    src: https://raw.githubusercontent.com/landfallbox/Pictures/master/202402172027554.jpg
tags: 
    - Python
---

# 集合

## 字典

Python 中字典用于存储键值对。

### 定义

```python
my_dict = {
    key1 : value1, 
    key2 : value2 
}
```

需要注意的是，键要求是唯一的。如果在一个 dict 里对不同的值使用同一个键，使用这个键访问 dict 得到的值是最后一个定义的值。

```python
my_dict = {
    'a': 1,
    'b': 2,
    'b': 3
}

print(my_dict['b'])

```

> 输出：
>
> ```
> 3
> ```

此外，键值对中的值是可以是任意数据类型，而键必须是不可变的，如字符串，数字或元组等。

### 删除元素

```python
tinydict = {
    'Name': 'Zara',
    'Age': 7,
    'Class': 'First'
}

del tinydict['Name']    # 删除键是'Name'的条目
tinydict.clear()        # 清空字典所有条目
del tinydict            # 删除字典
```

## Deque

deque 是 Doubly Ended Queue 的简写，即双端队列。与 list 需要 O(n) 的时间复杂度来添加和删除元素相比，deque 实现上述操作只需要 O(1) 的时间复杂度。

![image-20240205170857433](C:\Users\64297\AppData\Roaming\Typora\typora-user-images\image-20240205170857433.png)

### 声明

如果要声明一个 deque：

```python
from collections import deque 
	
 Declaring deque 
queue = deque(['name','age','DOB']) 
	
print(queue)

```

> 输出：
>
> ```
> deque(['name', 'age', 'DOB'])
> ```

也可以在声明时不明确指出其中的内容，而是只给出其最大长度：

```python
from collections import deque 
	
 Declaring deque 
queue = deque(maxlen=4) 
	
print(queue)

```

### 添加元素

向 deque 的两端添加元素有两个函数可以调用：`append` 和 `appendleft` 。前者将元素添加到队列的右端，后者将元素添加到队列的左端。

```python
 importing "collections" for deque operations
import collections

 initializing deque
de = collections.deque([1, 2, 3])
print("deque: ", de)

 using append() to insert element at right end
 inserts 4 at the end of deque
de.append(4)

 printing modified deque
print("\nThe deque after appending at right is : ")
print(de)

 using appendleft() to insert element at left end
 inserts 6 at the beginning of deque
de.appendleft(6)

 printing modified deque
print("\nThe deque after appending at left is : ")
print(de)

```

>输出：
>
>```
>deque:  deque([1, 2, 3])
>
>The deque after appending at right is : 
>deque([1, 2, 3, 4])
>
>The deque after appending at left is : 
>deque([6, 1, 2, 3, 4])
>```

这两个元素都只能添加单个元素，如果要一次性添加多个元素应当使用 `extend` 和 `extendleft` 。二者之间的区别和 `append` `appendleft` 之间的区别是一样的。值得注意的是这两个函数的参数必须是 iterable 的。

```python
 Python code to demonstrate working of 
 extend(), extendleft(), rotate(), reverse()

 importing "collections" for deque operations
import collections

 initializing deque
de = collections.deque([1, 2, 3,])

 using extend() to add numbers to right end 
 adds 4,5,6 to right end
de.extend([4,5,6])

 printing modified deque
print ("The deque after extending deque at end is : ")
print (de)

 using extendleft() to add numbers to left end 
 adds 7,8,9 to left end
de.extendleft([7,8,9])

 printing modified deque
print ("The deque after extending deque at beginning is : ")
print (de)

```

> 输出：
>
> ```
> The deque after extending deque at end is : 
> deque([1, 2, 3, 4, 5, 6])
> The deque after extending deque at beginning is : 
> deque([9, 8, 7, 1, 2, 3, 4, 5, 6])
> ```

如果想向 deque 的某个指定位置插入元素，应当使用 `insert` 。使用时需要提供两个参数，第一个参数是想把元素插入到哪个位置（索引），第二个参数是想插入的元素。

对于插入位置的具体说明，`insert` 的插入动作可以理解为插入完成后新插入元素的索引就是第一个参数的值，原先位置及其之后的元素依次后移。

```python
 importing "collections" for deque operations
import collections

 initializing deque
de = collections.deque([1, 2, 3, 3, 4, 2, 4])

 using insert() to insert the value 3 at 5th position
de.insert(4, 2)

 printing modified deque
print ("The deque after inserting 3 at 5th position is : ")
print (de)
```

> 输出：
>
> ```
> The deque after inserting 3 at 5th position is : 
> deque([1, 2, 3, 3, 2, 4, 2, 4])
> ```

### 删除 / 弹出元素

与添加元素相对，弹出元素也有两个函数：`pop` 和 `popleft` 。前者将元素弹出队列右端的第一个元素，后者弹出队列左端的第一个元素。

这两个函数的使用方法和 `append` 、`qppendleft` 的使用方法是完全一致的，此处不再赘述。

如果要删除指定元素，应当使用 `remove` 。如果有多个元素的满足删除条件，只删除第一个元素所在位置的索引。

```python
 importing "collections" for deque operations
import collections

 initializing deque
de = collections.deque([1, 2, 3, 3, 4, 2, 4])

 using remove() to remove the first occurrence of 3
de.remove(3)

 printing modified deque
print("The deque after deleting first occurrence of 3 is : ")
print(de)

```

> 输出：
>
> ```
> The deque after deleting first occurrence of 3 is : 
> deque([1, 2, 3, 4, 2, 4])
> ```

### 查找元素

查找元素可以使用 `index` 。使用时最多接收三个参数，第一个参数是必有的，后两个参数是可选的。第一个参数是要查找的元素，第二个参数是查找范围开始的索引，第三个参数是查找范围结束的索引。如果没有提供后两个参数，则会顺序查看 deque 的全部元素。如果提供了后两个参数，那么搜索范围将被限制在提供的范围中。无论哪种情况，查找成功时范围被查找元素的索引，失败时报 `ValueError` 。如果有多个元素的满足查找条件，只返回第一个元素所在位置的索引。

```python
 Python code to demonstrate working of 
 insert(), index(), remove(), count()

 importing "collections" for deque operations
import collections

 initializing deque
de = collections.deque([1, 2, 3, 3, 4, 2, 4])

 using index() to print the first occurrence of 4
print ("The number 4 first occurs at a position : ")
print (de.index(4, 2, 5))

```

> 输出：
>
> ```
> The number 4 first occurs at a position : 
> 4
> ```

### 计数

使用 `count` 可以统计 deque 中指定元素的个数：

```python
 importing "collections" for deque operations
import collections

 initializing deque
de = collections.deque([1, 2, 3, 3, 4, 2, 4])

 using count() to count the occurrences of 3
print("The count of 3 in deque is : ")
print(de.count(3))
```

> 输出：
>
> ```
> The count of 3 in deque is : 
> 2
> ```

使用 `len` 可以统计 deque 中现在有多少个元素。

```python
 Python Program to demonstrate 
 how to find size of a Dequeue
from collections import deque

 initializing deque
de = deque([1, 2, 3, 4, 5, 6])
print("Current Deque: ", de)

 printing current size of deque
print(f"Size of Deque: {len(de)}")

 using pop() to delete element from right end
 deletes 6 from the right end of deque
de.pop()

 printing modified deque
print("\nThe deque after deleting from right is: ", end = '')
print(de)

 printing current size of deque
print(f"Size of Deque: {len(de)}")

 This code is contributed by Susobhan Akhuli

```

> 输出：
>
> ```
> Current Deque:  deque([1, 2, 3, 4, 5, 6])
> Size of Deque: 6
> 
> The deque after deleting from right is: deque([1, 2, 3, 4, 5])
> Size of Deque: 5
> ```

### 获取元素

使用索引 0 可以获取 deque 的头元素，使用索引 -1 可以获取 deque 的尾元素。

```python
 Python Program to demonstrate
 accessing the front and back of a Deque

from collections import deque

 initializing deque
de = deque([1, 2, 3, 4, 5, 6])
print("Current Deque: ", de)

 Accessing the front element of the deque
print("Front element of the deque:", de[0])

 Accessing the back element of the deque
print("Back element of the deque:", de[-1])

 This code is contributed by Susobhan Akhuli

```

> 输出：
>
> ```
> Current Deque:  deque([1, 2, 3, 4, 5, 6])
> Front element of the deque: 1
> Back element of the deque: 6
> ```

### 倒序

如果想将 deque 倒序可以使用 `reverse` 。

```python
 Python code to demonstrate working of 
 extend(), extendleft(), rotate(), reverse()

 importing "collections" for deque operations
import collections

 initializing deque
de = collections.deque([1, 2, 3,])

 using reverse() to reverse the deque
de.reverse()

 printing modified deque
print ("The deque after reversing deque is : ")
print (de)

```

> 输出：
>
> ```
> The deque after reversing deque is : 
> deque([3, 2, 1])
> ```
>
> 

# 复制

Python 中的赋值语句不会 “复制” 对象，而是在变量和对象之间创建一个连接，类似于按引用传递。然而，“复制” 一个可变的集合或者一个包含可变元素的集合，从而可以在不影响本体的情况下修改复制体的内容在一些时候又是需要的，故而 Python 提供了 copy 库。

copy 库包含两个函数：`copy(x)` 和 `deepcopy(x[, memo])` 。前者的功能返回 shallow copy of x ，后者则返回 a deep copy of x 。

shallow copy 和 deep copy 的区别只在 x 是复合对象时才有意义。所谓复合对象，就是包含其他对象的对象，常见的有 list ，类实例等。具体来说，shallow copy 新建一个复合对象并向其中添加原对象包含的对象的引用，而 deep copy 新建一个复合对象并向其中添加原对象包含的对象的复制对象。

# Lambda

Lambda 函数一般是一个简单的匿名函数。其格式为：

```python
lambda arguments : expression
```

Lambda 函数默认将 expression 的结果返回。

```python
x = lambda a, b, c : a + b + c
print(x(5, 6, 2))
```

> 输出：
>
> ```
> 13
> ```

# filter

`filter` 接收两个参数，第二个 *iterable* 对象，第一个是函数。函数可以是显式定义的，也可以是 lambda 函数。`filter` 的作用就是 returns an iterator where the items are filtered through a function to test if the item is accepted or not 。

```python
ages = [5, 12, 17, 18, 24, 32]


def Func(x):
    if x < 18:
        return False
    else:
        return True


adults = filter(Func, ages)

for x in adults:
    print(x)
    
```

> 输出：
>
> ```
> 18
> 24
> 32
> ```

# NumPy

## transpose

`transpose(a, axes=None)` 用于转置数组。`a` 是要转置的数组，`axes` 是转置后的形状。`axes` 是可选的，如果提供，那么必须是 tuple 或 list ，且如果 `a` 是 N 维的，`axes` 也应当是 N 维的。函数返回转置后的数组。

对于一维数组应用此函数将不会造成任何改变。对于二维数组应用此函数就是进行二维矩阵的转置运算（主对角线不动，副对角线互换）。n 维数组的转置直接解释起来是很抽象的，不如直接看例子：

```python
a = np.ones((1, 2, 3))
np.transpose(a, (1, 0, 2)).shape
```

> 输出：
>
> ```
> (2, 1, 3)
> ```

转置的过程可以理解为 *(1, 2, 3)* 分别对应三维矩阵的第 0 轴、第 1 轴、第 2 轴，由于 `axes` 是 *(1, 0, 2)* ，故将第 0 轴和第 1 轴交换，第 2 轴不动，从而使得三维矩阵的形状从 *(1, 2, 3)* 变成了 *(2, 1, 3)* 。

已经说过，`axes` 是可选的。如果不提供 `axes` ，就会将数组的维度倒序，如将 *(1, 2, 3)* 变成 *(3, 2, 1)* 。

# 参考资料

[numpy.transpose](https://numpy.org/doc/stable/reference/generated/numpy.transpose.html)

[Numpy中transpose()函数的可视化理解](https://zhuanlan.zhihu.com/p/61203757)